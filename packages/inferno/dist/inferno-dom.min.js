!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.InfernoDOM=t()}(this,function(){"use strict";function n(n){return!u(n._e)}function t(n){return!u(n._component)}function e(n){return!u(n._async)}function o(n){return!u(n._dom)}function r(n){return!u(n._tag)}function l(n){return!u(n.bp)}function u(n){return void 0===n}function i(n){return null===n}function c(n){return u(n)||i(n)||_(n)}function a(n){return Array.isArray(n)}function f(n){return!u(n.then)}function s(n){return"string"==typeof n}function d(n){return"number"==typeof n}function _(n){return n===!1}function m(n){return n===!0}function p(n){return s(n)||d(n)}function h(n,t,e,o,r,l){for(var u=0;u<n.length;u++)v(n[u],t,e,o,r,l)}function v(n,o,l,u,i,c){a(n)?h(n,o,l,u,i,c):T(n)?b(n,o,i,c):e(n)?k(n,o,i,c):r(n)?g(n,o,l,u,i,c):t(n)&&y(n,o,l,u,i,c)}function y(n,t,e,o,r,l){var u=n._hooks,i=n._dom,c=n._isStateful,a=n._instance;m(c)?(v(a._lastInput,t,e,o,r,l),a.componentWillUnmount()):(v(a,t,e,o,r,l),u&&u.componentWillUnmount&&tn("componentWillUnmount",u.componentWillUnmount,i,e,null,null))}function g(n,t,e,o,r,l){var u=n._hooks,c=n._dom,f=n._tag;if(s(f)){u&&(u.willDetach&&tn("willDetach",u.willDetach,c,e,null,null),u.detached&&tn("detached",u.detached,c,e,null,null));var d=n._children;i(d)||(a(d)?h(d,c,e,o,!1,!1):p(d)||v(d,c,e,o,!1,!1));var y=n._ref;y&&o&&delete o.refs[y]}m(r)&&_(l)&&B(t,c)}function b(n,t,e,o){m(e)&&_(o)&&B(t,n._dom)}function k(n,t,e,o){n._cancel=!0,m(e)&&_(o)&&B(t,n._dom)}function w(o,u,c,f,s,d,_,p){if(n(u))n(o)?I(o,u):m(p)?(v(o,c,f,s,p,!1),f.deleteRoot()):cn(u,null);else if(n(o))m(p)&&un(u,c,f,s,d,!1);else if(a(o))a(u)?_?M(o,u,c,f,s,d):O(o,u,c,f,s,d,p):on(c,un(u,null,f,s,d,_),o,f,s);else if(a(u))rn(o,u,c,f,s,d,_);else if(e(u))e(o)?U(o,u,c,f,s,d,_,p):A(o,u,c,f,s,d,_,p);else if(l(u));else if(l(o));else if(r(u))r(o)&&N(o,u,c,f,s,d,_,p);else if(r(o));else if(t(u))t(o)&&x(o,u,c,f,s,d,_,p);else if(t(o));else if(e(o)){var h=o._lastInput;i(h)?ln(o,u,c,f,s,d,_):w(h,u,c,f,s,d,_,p)}else{if(!T(o))throw new Error(wn);T(u)?V(o,u):en(o,u,c,f,s,d,_)}}function x(n,t,e,o,r,l,u,i){var c=n._component,a=t._component,f=n._isStateful,s=t._isStateful,d=n._props,_=t._props;if(c===a)if(m(f));else if(m(s));else{var p=t._hooks,h=n._instance,v=a(_),g=!0;p&&p.componentShouldUpdate&&(g=p.componentShouldUpdate(n._dom,d,_)),m(g)?(w(h,v,e,o,null,l,!1,!1),t._dom=v._dom,t._instance=v):(t._dom=h._dom,t._instance=h)}else{var b=fn(t,e,o,r,l,u);R(e,b,n._dom),y(n,e,o,r,!0,!0)}}function E(n,t,e,o,r,l){if(i(t))for(var c=Object.keys(n),a=0;a<c.length;a++){var f=c[a];e(f,null,r)}else if(i(n))for(var s=Object.keys(t),d=0;d<s.length;d++){var _=s[d];e(_,t[_],r)}else{for(var m=Object.keys(n),p=Object.keys(t),h=0;h<m.length;h++){var v=m[h];u(t[v])?e(v,null,r,l):o(v,n[v],t[v],r,l)}for(var y=0;y<p.length;y++){var g=p[y];u(n[g])&&e(g,t[g],r,l)}}}function N(n,t,e,o,r,l,u,c){var a=n._tag,f=t._tag,s=t._hooks,d=n._dom,_=n._isKeyed&&t._isKeyed||u;if(t._dom=d,a!==f)v(n,null,o,r,c,!0),R(e,un(t,null,o,r,l,_),d);else{var m=n._text,p=t._text;if(!i(s)&&s.willUpdate&&tn("willUpdate",s.willUpdate,d,o,null,null),m!==p)i(p)?H(null,d,!1):H(p,d,!i(m));else{var h=n._children,y=t._children;h!==y&&(h=$(h),y=$(y),w(h,y,d,o,r,l,_,c))}var g=n._props,b=t._props;g!==b&&E(g,b,X,D,d,l);var k=n._attrs,x=t._attrs;k!==x&&E(k,x,Q,S,d,l);var N=n._events,I=t._events;N!==I&&E(N,I,z,C,d,l);var U=n._ref,A=t._ref;U!==A&&j(r,U,A,d),!i(s)&&s.didUpdate&&tn("didUpdate",s.didUpdate,d,o,null,null)}}function j(n,t,e,o){n&&(s(t)&&delete n.refs[t],s(e)&&(n.refs[e]=o))}function I(n,t){t._dom=n._dom}function U(n,t,e,o,r,l,u,c){var a=n._lastInput,s=t._async;i(a)?f(s)&&(n._cancel=!0,s.then(function(i){if(_(t._cancel)){i=$(i);var c=un(i,null,o,r,l,u);R(e,c,n._dom),t._dom=c,t._lastInput=i}})):f(s)&&A(a,t,e,o,r,l,u,c)}function A(n,t,e,o,r,l,u,i){var c=t._async;c.then(function(c){_(t._cancel)&&(c=$(c),w(n,c,e,o,r,l,u,i),t._dom=nn(c,e),t._lastInput=c)})}function O(n,t,e,o,r,l,u){n=Z(n,!1),t=Z(t,!0);for(var i=n.length,c=t.length,a=i>c?c:i,f=0;a>f;f++)w(n[f],t[f],e,o,r,l,!1,u);if(c>i)for(f=a;c>f;f++)un(t[f],e,o,r,l,!1);else if(i>c)for(f=a;i>f;f++)v(n[f],e,o,r,!0,!1)}function V(n,t){var e=t._text,o=n._dom;t._dom=o,n._text!==e&&G(o,t._text)}function M(n,t,e,o,r,l){}function S(n,t,e,o,r){t!==e&&Q(n,e,o,r)}function C(n,t,e,o,r){t!==e&&z(n,e,o)}function D(n,t,e,o){t!==e&&("className"===n?o.className=e:"style"===n?W(t,e,o):o[n]=e)}function W(n,t,e){if(s(t))e.style.cssText=t;else if(u(n)){if(!u(t))for(var o=Object.keys(t),r=0;r<o.length;r++){var l=o[r];e.style[l]=t[l]}}else if(u(t))e.removeAttribute("style");else{for(var i=Object.keys(t),c=0;c<i.length;c++){var a=i[c];e.style[a]=t[a]}for(var f=Object.keys(n),d=0;d<f.length;d++){var _=f[d];u(t[_])&&(e.style[_]="")}}}function T(n){return!u(n._t)}function K(n){return!u(n.bp)}function F(){return J("")}function P(n,t){n.appendChild(t)}function R(n,t,e){n.replaceChild(t,e)}function B(n,t){n.removeChild(t)}function q(n,t,e){u(e)?n.appendChild(t):n.insertBefore(t,e)}function z(n,t,e){e[n]=t}function G(n,t){n.nodeValue=t}function H(n,t,e){e?G(t.firstChild,n):null===n?t.textContent="":""!==n?t.textContent=n:P(t,J(""))}function J(n){return document.createTextNode(n)}function L(n,t){return t?document.createElementNS(t,n):document.createElement(n)}function Q(n,t,e,o){c(t)?e.removeAttribute(n):o?e.setAttributeNS(o,n,t):e.setAttribute(n,t)}function X(n,t,e){c(t)?"className"===n?e.removeAttribute("class"):"style"===n?e.removeAttribute("style"):e[n]="":"className"===n?e.className=t:"style"===n?W(null,t,e):e[n]=t}function Y(n,t){for(var e=0;e<n.length;e++){var o=n[e];a(o)?Y(o,t):c(o)||(p(o)?t.push(new gn(o)):f(o)?t.push(new bn(o)):t.push(o))}}function Z(n,t){if(u(xn.get(n))){if(!t){var e=[];return xn.set(n,!0),Y(n,e),e}var o=n.slice(0);xn.set(n,!0),n.length=0,Y(o,n)}return n}function $(n){return c(n)?new kn:o(n)?n:p(n)?new gn(n):f(n)?new bn(n):n}function nn(n,t){return u(n._dom)?a(n)?nn(n[0],t):void 0:n._dom}function tn(n,t,e,o,r,l){switch(n){case"attached":case"detached":case"componentDidMount":o.callback(function(){t(e)});break;default:return t(e,r,l)}}function en(n,t,e,r,l,u,i){var a=n._dom;c(t)||o(t)||(t=$(t)),R(e,un(t,null,r,l,u,i),a)}function on(n,t,e,o,r){var l=e[0];q(n,t,nn(l,null)),v(e,n,o,r,!0,!1)}function rn(n,t,e,o,r,l,u){R(e,un(t,null,o,r,l,u),nn(n,null))}function ln(n,t,e,r,l,u,i){var a=n._dom;n._cancel=!0,c(t)||o(t)||(t=$(t)),R(e,un(t,null,r,l,u,i),a)}function un(o,l,u,c,f,s){if(n(o))return cn(o,l);if(T(o))return an(o,l);if(t(o))return fn(o,l,u,c,f,s);if(r(o))return sn(o,l,u,c,f);if(K(o))return dn(o,l,u,c);if(e(o))return _n(o,l,u,c,f,s);if(a(o)){var d=l;return i(l)&&(d=document.createDocumentFragment()),_(s)?mn(Z(o,!0),d,u,c,f,!1):mn(o,d,u,c,f,!0),d}throw p(o)?new Error('Inferno Error: invalid mount input of "'+typeof o+'". Ensure the String or Number is wrapped in a VElement, VComponent, VTemplate or Array.'):new Error('Inferno Error: failed to "mount", invalid object was detected. Valid "mount" types are Array, Promise, Function, VTextNode, VElement, VComponent, VAsyncNode and VTemplate.')}function cn(n,t){var e=F();return n._dom=e,i(t)||P(t,e),e}function an(n,t){var e=J(n._text);return n._dom=e,i(t)||P(t,e),e}function fn(n,t,e,o,r,l){var u,i=n._isStateful,c=n._component,a=n._props;n._ref;if(m(i)){new c(a)}else{var f=n._hooks,s=$(c(a));u=un(s,t,e,null,r,l),n._dom=u,n._instance=s,f&&(f.componentWillMount&&tn("componentWillMount",f.componentWillMount,u,e,null,null),f.componentDidMount&&tn("componentDidMount",f.componentDidMount,u,e,null,null))}return u}function sn(n,t,e,o,r){var l=n._tag;if(s(l)){var u=L(l,r),c=n._text,f=n._hooks;n._dom=u,f&&(f.created&&f.created(u),f.attached&&e.callback(function(){f.attached(u)})),c&&H(c,u,!1);var d=n._children,_=n._isKeyed;i(d)||(a(d)?(_||(d=n._children=Z(d,!1)),mn(d,u,e,o,r,_)):un(d,u,e,o,r,_));var m=n._events;if(!i(m))for(var p=Object.keys(m),h=0;h<p.length;h++){var v=p[h],y=m[v];z(v,y,u)}var g=n._attrs;if(!i(g))for(var b=Object.keys(g),k=0;k<b.length;k++){var w=b[k],x=g[w];Q(w,x,u,r)}var E=n._props;if(!i(E))for(var N=Object.keys(E),j=0;j<N.length;j++){var I=N[j],U=E[I];X(I,U,u)}var A=n._ref;return i(A)||pn(o,A,u),i(t)||P(t,u),u}throw new Error("Inferno Error: expected a String for VElement tag type")}function dn(n,t,e,o){}function _n(n,t,e,o,r,l){var u=n._async,c=F();return n._dom=c,f(u)&&u.then(function(u){if(_(n._cancel)){u=$(u);var i=un(u,null,e,o,r,l);R(t||c.parentNode,i,c),n._dom=i,n._lastInput=u}}),i(t)||P(t,c),c}function mn(n,t,e,o,r,l){for(var u=0;u<n.length;u++){var i=n[u];un(i,t,e,o,r,l)}}function pn(n,t,e){!c(n)&&s(t)&&(n.refs[t]=e)}function hn(n,t){var e=Nn.get(t),o=new En(t);n=$(n),u(e)?(un(n,t,o,null,null,!1),e=new jn(t,n)):(w(e.input,n,t,o,null,null,!1,!0),e.input=n),o.trigger()}function vn(n){return new In(null,null,null,null)}function yn(n){return vn(n)}var gn=function(n){this._dom=null,this._key=null,this._t=null,this._text=n},bn=function(n){this._dom=null,this._key=null,this._cancel=!1,this._lastInput=null,this._async=n},kn=function(){this._dom=null,this._key=null,this._e=null},wn='Inferno Error: bad input(s) passed to "patch". Please ensure only valid objects are used in your render.',xn=new Map,En=function(n){this.domNode=n,this.callbacks=[]};En.prototype.callback=function n(n){this.callbacks.push(n)},En.prototype.trigger=function(){var n=this.callbacks,t=n.length;if(t>0)for(var e=0;t>e;e++)n[e]()},En.prototype.deleteRoot=function(){Nn.delete(this.domNode)};var Nn=new Map,jn=function(n,t){this.input=t,Nn.set(n,this)},In=function(n,t,e,o){this._dom=null,this._key=t,this.bp=n,this.v0=e,this.v1=o},Un={render:hn,template:yn};return Un});