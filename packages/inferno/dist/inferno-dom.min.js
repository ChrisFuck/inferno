!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.InfernoDOM=t()}(this,function(){"use strict";function n(n){return!i(n._e)}function t(n){return!i(n._component)}function e(n){return!i(n._async)}function o(n){return!i(n._dom)}function r(n){return!i(n._tag)}function l(n){return!i(n.bp)}function i(n){return void 0===n}function u(n){return i(n)||a(n)}function a(n){return null===n}function c(n){return i(n)||a(n)||p(n)}function f(n){return Array.isArray(n)}function s(n){return!i(n.then)}function d(n){return"string"==typeof n}function _(n){return"number"==typeof n}function p(n){return n===!1}function m(n){return n===!0}function v(n){return d(n)||_(n)}function h(n,t,e,o,r,l){for(var i=0;i<n.length;i++)y(n[i],t,e,o,r,l)}function y(n,o,l,i,u,a){f(n)?h(n,o,l,i,u,a):F(n)?w(n,o,u,a):e(n)?k(n,o,u,a):r(n)?b(n,o,l,i,u,a):t(n)&&g(n,o,l,i,u,a)}function g(n,t,e,o,r,l){var i=n._hooks,u=n._dom,a=n._isStateful,c=n._instance;m(a)?(y(c._lastInput,t,e,o,r,l),c.componentWillUnmount()):(y(c,t,e,o,r,l),i&&i.componentWillUnmount&&en("componentWillUnmount",i.componentWillUnmount,u,e,null,null))}function b(n,t,e,o,r,l){var i=n._hooks,u=n._dom,c=n._tag;if(d(c)){i&&(i.willDetach&&en("willDetach",i.willDetach,u,e,null,null),i.detached&&en("detached",i.detached,u,e,null,null));var s=n._children;a(s)||(f(s)?h(s,u,e,o,!1,!1):v(s)||y(s,u,e,o,!1,!1));var _=n._ref;_&&o&&delete o.refs[_]}m(r)&&p(l)&&q(t,u)}function w(n,t,e,o){m(e)&&p(o)&&q(t,n._dom)}function k(n,t,e,o){n._cancel=!0,m(e)&&p(o)&&q(t,n._dom)}function U(o,i,u,c,s,d,_,p,v){if(n(i))n(o)?S(o,i):m(p)?(y(o,u,c,s,p,!1),c.deleteRoot()):un(o,i,u,c,s);else if(n(o))m(p)?dn(i,u,c,s,d,!1,v):ln(o,i,u,c,s,d,_,v);else if(f(o))f(i)?_?D(o,i,u,c,s,d,v):A(o,i,u,c,s,d,p,v):cn(u,dn(i,null,c,s,d,_,v),o,c,s);else if(f(i))fn(o,i,u,c,s,d,_,v);else if(e(i))e(o)?V(o,i,u,c,s,d,_,p,v):j(o,i,u,c,s,d,_,p,v);else if(l(i));else if(r(i))r(o)?x(o,i,u,c,s,d,_,p,v):on(o,i,u,c,s,d,_,p,v);else if(t(i))t(o)?E(o,i,u,c,s,d,_,p,v):rn(o,i,u,c,s,d,_,p,v);else if(e(o)){var h=o._lastInput;a(h)?sn(o,i,u,c,s,d,_,v):U(h,i,u,c,s,d,_,p,v)}else{if(!F(o))throw new Error(In);F(i)?C(o,i):an(o,i,u,c,s,d,_,v)}}function E(n,t,e,o,r,l,i,u,c){var s=n._component,d=t._component,_=n._isStateful,p=t._isStateful,v=n._props,h=t._props;if(s===d)if(m(_)){if(m(p)){var y=n._instance,b=y._lastInput,w=y.componentShouldUpdate();if(w){var k=y.state,E=Object.assign({},y.state),N=y._patchComponent(b,e,k,E,v,h,o,r,l,i,u,c);y._lastInput=N,t._instance=y,t._dom=N._dom}}}else if(m(p));else{var x=t._hooks,I=!a(x),S=n._instance,V=nn(d(h)),j=!0;if(f(V))throw new Error(Sn);I&&x.componentShouldUpdate&&(j=x.componentShouldUpdate(n._dom,v,h)),m(j)?(I&&x.componentWillUpdate&&en("componentWillUpdate",x.componentWillUpdate,n._dom,o,null,null),U(S,V,e,o,null,l,!1,!1,c),t._dom=V._dom,t._instance=V,I&&x.componentDidUpdate&&en("componentDidUpdate",x.componentDidUpdate,t._dom,o,null,null)):(t._dom=S._dom,t._instance=S)}else{var A=mn(t,e,o,r,l,i,c);B(e,A,n._dom),g(n,e,o,r,!0,!0)}}function N(n,t,e,o,r,l){if(a(t))for(var u=Object.keys(n),c=0;c<u.length;c++){var f=u[c];e(f,null,r)}else if(a(n))for(var s=Object.keys(t),d=0;d<s.length;d++){var _=s[d];e(_,t[_],r)}else{for(var p=Object.keys(n),m=Object.keys(t),v=0;v<p.length;v++){var h=p[v];i(t[h])?e(h,null,r,l):o(h,n[h],t[h],r,l)}for(var y=0;y<m.length;y++){var g=m[y];i(n[g])&&e(g,t[g],r,l)}}}function x(n,t,e,o,r,l,i,u,c){var f=n._tag,s=t._tag,d=t._hooks,_=n._dom,p=n._isKeyed&&t._isKeyed||i;if(t._dom=_,f!==s)y(n,null,o,r,u,!0),B(e,dn(t,null,o,r,l,p,c),_);else{var m=n._text,v=t._text;if(!a(d)&&d.willUpdate&&en("willUpdate",d.willUpdate,_,o,null,null),m!==v)a(v)?J(null,_,!1):J(v,_,!a(m));else{var h=n._children,g=t._children;h!==g&&(a(h)?dn(g,_,o,r,l,p,c):(g=t._children=nn(g),U(h,g,_,o,r,l,p,!1,c)))}var b=n._props,w=t._props;b!==w&&N(b,w,Y,W,_,l);var k=n._attrs,E=t._attrs;k!==E&&N(k,E,X,O,_,l);var x=n._events,S=t._events;x!==S&&N(x,S,G,M,_,l);var V=n._ref,j=t._ref;V!==j&&I(r,V,j,_),!a(d)&&d.didUpdate&&en("didUpdate",d.didUpdate,_,o,null,null)}}function I(n,t,e,o){n&&(d(t)&&delete n.refs[t],d(e)&&(n.refs[e]=o))}function S(n,t){t._dom=n._dom}function V(n,t,e,o,r,l,i,u,c){var f=n._lastInput,d=t._async;a(f)?s(d)&&(n._cancel=!0,d.then(function(u){if(p(t._cancel)){u=nn(u);var a=dn(u,null,o,r,l,i,c);B(e,a,n._dom),t._dom=a,t._lastInput=u}})):s(d)&&j(f,t,e,o,r,l,i,u,c)}function j(n,t,e,o,r,l,i,u,a){var c=t._async;c.then(function(c){p(t._cancel)&&(c=nn(c),U(n,c,e,o,r,l,i,u,a),t._dom=tn(c,e),t._lastInput=c)})}function A(n,t,e,o,r,l,i,u){n=$(n,!1),t=$(t,!0);for(var a=n.length,c=t.length,f=a>c?c:a,s=0;f>s;s++)U(n[s],t[s],e,o,r,l,!1,i,u);if(c>a)for(s=f;c>s;s++)dn(t[s],e,o,r,l,!1,u);else if(a>c)for(s=f;a>s;s++)y(n[s],e,o,r,!0,!1)}function C(n,t){var e=t._text,o=n._dom;t._dom=o,n._text!==e&&H(o,t._text)}function D(n,t,e,o,r,l,i){}function O(n,t,e,o,r){t!==e&&X(n,e,o,r)}function M(n,t,e,o,r){t!==e&&G(n,e,o)}function W(n,t,e,o){t!==e&&("className"===n?a(e)?o.removeAttribute("class"):o.className=e:"style"===n?T(t,e,o):o[n]=e)}function T(n,t,e){if(d(t))e.style.cssText=t;else if(u(n)){if(!u(t))for(var o=Object.keys(t),r=0;r<o.length;r++){var l=o[r];e.style[l]=t[l]}}else if(u(t))e.removeAttribute("style");else{for(var a=Object.keys(t),c=0;c<a.length;c++){var f=a[c];e.style[f]=t[f]}if(!u(n))for(var s=Object.keys(n),_=0;_<s.length;_++){var p=s[_];i(t[p])&&(e.style[p]="")}}}function F(n){return!i(n._t)}function K(n){return!i(n.bp)}function P(){return L("")}function R(n,t){n.appendChild(t)}function B(n,t,e){n.replaceChild(t,e)}function q(n,t){n.removeChild(t)}function z(n,t,e){i(e)?n.appendChild(t):n.insertBefore(t,e)}function G(n,t,e){e[n]=t}function H(n,t){n.nodeValue=t}function J(n,t,e){e?H(t.firstChild,n):null===n?t.textContent="":""!==n?t.textContent=n:R(t,L(""))}function L(n){return document.createTextNode(n)}function Q(n,t){return t?document.createElementNS(t,n):document.createElement(n)}function X(n,t,e,o){c(t)?e.removeAttribute(n):o?e.setAttributeNS(o,n,t):e.setAttribute(n,t)}function Y(n,t,e){c(t)?"className"===n?e.removeAttribute("class"):"style"===n?e.removeAttribute("style"):e[n]="":"className"===n?e.className=t:"style"===n?T(null,t,e):e[n]=t}function Z(n,t){for(var e=0;e<n.length;e++){var o=n[e];f(o)?Z(o,t):c(o)||(v(o)?t.push(new En(o)):s(o)?t.push(new Nn(o)):t.push(o))}}function $(n,t){if(i(Vn.get(n))){if(!t){var e=[];return Vn.set(n,!0),Z(n,e),e}var o=n.slice(0);Vn.set(n,!0),n.length=0,Z(o,n)}return n}function nn(n){return c(n)?new xn:o(n)?n:v(n)?new En(n):s(n)?new Nn(n):n}function tn(n,t){return i(n._dom)?f(n)?tn(n[0],t):void 0:n._dom}function en(n,t,e,o,r,l){switch(n){case"attached":case"detached":case"componentDidMount":o.callback(function(){t(e)});break;default:return t(e,r,l)}}function on(n,t,e,o,r,l,i,u,a){var c=vn(t,null,o,r,l,a);B(e,c,tn(n,null)),y(n,e,o,r,u,!0)}function rn(n,t,e,o,r,l,i,u,a){var c=mn(t,null,o,r,l,i,a);B(e,c,tn(n,null)),y(n,e,o,r,u,!0)}function ln(n,t,e,r,l,i,u,a){var f=n._dom;c(t)||o(t)||(t=nn(t)),B(e,dn(t,null,r,l,i,u,a),f)}function un(n,t,e,o,r){B(e,_n(t,null),tn(n,null))}function an(n,t,e,r,l,i,u,a){var f=n._dom;c(t)||o(t)||(t=nn(t)),B(e,dn(t,null,r,l,i,u,a),f)}function cn(n,t,e,o,r){var l=e[0];z(n,t,tn(l,null)),y(e,n,o,r,!0,!1)}function fn(n,t,e,o,r,l,i,u){B(e,dn(t,null,o,r,l,i,u),tn(n,null))}function sn(n,t,e,r,l,i,u,a){var f=n._dom;n._cancel=!0,c(t)||o(t)||(t=nn(t)),B(e,dn(t,null,r,l,i,u,a),f)}function dn(o,l,i,u,c,s,d){if(n(o))return _n(o,l);if(F(o))return pn(o,l);if(t(o))return mn(o,l,i,u,c,s,d);if(r(o))return vn(o,l,i,u,c,d);if(K(o))return hn(o,l,i,u,d);if(e(o))return yn(o,l,i,u,c,s,d);if(f(o)){var _=l;return a(l)&&(_=document.createDocumentFragment()),p(s)?gn($(o,!0),_,i,u,c,!1,d):gn(o,_,i,u,c,!0,d),_}throw v(o)?new Error('Inferno Error: invalid mount input of "'+typeof o+'". Ensure the String or Number is wrapped in a VElement, VComponent, VTemplate or Array.'):new Error('Inferno Error: failed to "mount", invalid object was detected. Valid "mount" types are Array, Promise, Function, VTextNode, VElement, VComponent, VAsyncNode and VTemplate.')}function _n(n,t){var e=P();return n._dom=e,a(t)||R(t,e),e}function pn(n,t){var e=L(n._text);return n._dom=e,a(t)||R(t,e),e}function mn(n,t,e,o,r,l,i){var u,c=n._isStateful,s=n._component,d=n._props;n._ref;if(m(c)){var _=new s(d),p=n._ref;_._patch=U,!a(o)&&p&&bn(o,p,_);var v=_.getChildContext();a(v)||(i=Object.assign({},i,v)),_._unmounted=!1,_._pendingSetState=!0,_.componentWillMount();var h=nn(_.render());_._pendingSetState=!1,u=dn(h,t,e,_,r,l,i),_._lastInput=h,_.componentDidMount(),n._dom=u,n._instance=_}else{var y=n._hooks,g=nn(s(d));if(f(g))throw new Error("Inferno Error: components cannot have an Array as a root input. Use String, Number, VElement, VComponent, VTemplate, Null or False instead.");u=dn(g,t,e,null,r,l,i),n._dom=u,n._instance=g,y&&(y.componentWillMount&&en("componentWillMount",y.componentWillMount,u,e,null,null),y.componentDidMount&&en("componentDidMount",y.componentDidMount,u,e,null,null))}return u}function vn(n,t,e,o,r,l){var i=n._tag;if(d(i)){var u=Q(i,r),c=n._text,s=n._hooks;n._dom=u,s&&(s.created&&s.created(u),s.attached&&e.callback(function(){s.attached(u)})),c&&J(c,u,!1);var _=n._children,p=n._isKeyed;a(_)||(f(_)?(p||(_=n._children=$(_,!1)),gn(_,u,e,o,r,p,l)):(_=n._children=nn(_),dn(_,u,e,o,r,p,l)));var m=n._events;if(!a(m))for(var v=Object.keys(m),h=0;h<v.length;h++){var y=v[h],g=m[y];G(y,g,u)}var b=n._attrs;if(!a(b))for(var w=Object.keys(b),k=0;k<w.length;k++){var U=w[k],E=b[U];X(U,E,u,r)}var N=n._props;if(!a(N))for(var x=Object.keys(N),I=0;I<x.length;I++){var S=x[I],V=N[S];Y(S,V,u)}var j=n._ref;return a(j)||bn(o,j,u),a(t)||R(t,u),u}throw new Error("Inferno Error: expected a String for VElement tag type")}function hn(n,t,e,o,r){}function yn(n,t,e,o,r,l,i){var u=n._async,c=P();return n._dom=c,s(u)&&u.then(function(u){if(p(n._cancel)){u=nn(u);var a=dn(u,null,e,o,r,l,i);B(t||c.parentNode,a,c),n._dom=a,n._lastInput=u}}),a(t)||R(t,c),c}function gn(n,t,e,o,r,l,i){for(var u=0;u<n.length;u++){var a=n[u];dn(a,t,e,o,r,l,i)}}function bn(n,t,e){!c(n)&&d(t)&&(n.refs[t]=e)}function wn(n,t){var e=An.get(t),o=new jn(t);n=nn(n),i(e)?(dn(n,t,o,null,null,!1,{}),e=new Cn(t,n)):(U(e.input,n,t,o,null,null,!1,!0,{}),e.input=n),o.trigger()}function kn(n){return new Dn(null,null,null,null)}function Un(n){return kn(n)}var En=function(n){this._dom=null,this._key=null,this._t=null,this._text=n},Nn=function(n){this._dom=null,this._key=null,this._cancel=!1,this._lastInput=null,this._async=n},xn=function(){this._dom=null,this._key=null,this._e=null},In='Inferno Error: bad input(s) passed to "patch". Please ensure only valid objects are used in your render.',Sn="Inferno Error: components cannot have an Array as a root input. Use String, Number, VElement, VComponent, VTemplate, Null or False instead.",Vn=new Map,jn=function(n){this.domNode=n,this.callbacks=[]};jn.prototype.callback=function n(n){this.callbacks.push(n)},jn.prototype.trigger=function(){var n=this.callbacks,t=n.length;if(t>0)for(var e=0;t>e;e++)n[e]()},jn.prototype.deleteRoot=function(){An.delete(this.domNode)};var An=new Map,Cn=function(n,t){this.input=t,An.set(n,this)},Dn=function(n,t,e,o){this._dom=null,this._key=t,this.bp=n,this.v0=e,this.v1=o},On={render:wn,template:Un};return On});